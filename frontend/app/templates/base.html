<html>
  <head>
  	{% if title %}
  	<title></title>
  	{% else %}
  	<title></title>
  	{% endif %}
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/custom.css" rel="stylesheet">
    <link href="/static/css/sweetalert.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/flot.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/d3.v3.min.js"></script>
    <script src="/static/js/sweetalert.min.js"></script>
    <script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>
  </head>
  <body>
    <div class="container">
    	<div class=col-md-12>
        <br>
        <h1><b>Legendary Capstone Project</b></h1> 
        <br>
        <h3>Emotional Data Management and Analysis</h3>
        <br>
        <hr>
      </div>

      {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul>
          {% for message in messages %}
            <li> {{ message }} </li>
          {% endfor %}
        </ul>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </div>
    <script>

      $(document).ready(function(){
        //console.log("In!");


        // Choose image button
        $("#upload-img").click(function(event){
          // console.log("Browse!");
        });


        $("#upload-img").change(function(event){
          if($("#upload-img")[0].files['length'] !== 0){
            $("#file-name").html($("#upload-img")[0].files[0]['name']);  
          }
        });


        // Submit image button
        $("#submit-img").click(function(event){
          var file = $("#upload-img")[0];
          if(file.files['length'] == 0){
            sweetAlert("Error", "Please choose an image!", "error");
            return;
          }
          file = file.files[0];
          if(!/image\/\w+/.test(file.type)){
            sweetAlert("Error", "File is not an image!", "error");
          }

          var reader = new FileReader();
          reader.readAsDataURL(file);

          reader.onloadend = function(evt){
            //image.getElementById("#plot-img").src = this.result;
            // console.log("image upload!")
            //$("#plot-img").innerHTML= '<img src="'+e.target.result+'" alt=""/>';
            // $("#plot-img").src=e.target.result;
            document.getElementById('plot-img').src = evt.target.result;
            $("#predict-emotion").html("guess what?");

            //$("#file-name").html($("#upload-img")[0].files[0]['name']);

            // var imageData = evt.target.result;
            // $.ajax({
            //   url: '/imgClassify',
            //   type: 'POST',
            //   data: imageData,
            //   success: function(response){
            //     console.log("SubmitÔºÅ",response);
            //     swal("Success", "Submit to database!", "success");
            //   },
            //   error: function(error){
            //     console.log("Error POST!",error);
            //     sweetAlert("Error", error['responseText'], "error");
            //   }
            // });
          }
        });


        // Submit image button
        // $("#submit-img").click(function(event){
        //   $.ajax({
        //     url: '/labelling',
        //     type: 'POST',
        //   });
        // });



      });
    </script>
  </body>
</html>